# Event processing configuration (required by nginx)
events {}

http {
  # Main HTTP server block
  server {
    # Listen on port 80 (HTTP)
    listen 80;

    # Accept requests for any hostname
    server_name _;

    # Proxy all requests to the backend server
    location / {
      # Forward requests to local server running on port 8080
      proxy_pass http://127.0.0.1:8080;

      # Preserve the original Host header from the client request
      proxy_set_header Host $host;

      # Pass the real client IP address to the backend
      proxy_set_header X-Real-IP $remote_addr;

      # Add client IP to X-Forwarded-For header chain
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

      # Indicate the original protocol (http/https) used by the client
      proxy_set_header X-Forwarded-Proto $scheme;
    }
  }

  # If you later want origin TLS on 443, add a server { listen 443 ssl; ... }
}